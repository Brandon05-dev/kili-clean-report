# CleanKili - Community Environmental Reporting System

A comprehensive platform for community-driven environmental reporting and management with real-time notifications and AI-powered daily summaries.

## ğŸš€ Project Overview

CleanKili empowers communities to report environmental issues while providing administrators with powerful tools for tracking, managing, and resolving problems efficiently.

### âœ¨ Key Features
- **Community Reporting**: Citizens can submit environmental reports with GPS location and photos
- **Real-time Notifications**: Instant WhatsApp & SMS alerts to administrators
- **AI-Powered Summaries**: Daily intelligent reports generated by OpenAI GPT-4
- **Admin Dashboard**: Comprehensive management interface with analytics
- **Secure Admin System**: Invite-only admin access with role-based permissions
- **Live Updates**: Real-time data synchronization across all devices
- **Mobile Responsive**: Optimized for desktop, tablet, and mobile devices

## ğŸ—ï¸ Architecture

### Frontend (React + TypeScript)
- **Modern React** with TypeScript and Vite
- **TailwindCSS** for responsive design
- **shadcn/ui** component library
- **React Router** for navigation
- **Live Map Integration** for report visualization
- **Admin Dashboard** with comprehensive analytics

### Backend (Express.js + Supabase)
- **Express.js** with TypeScript
- **Supabase** PostgreSQL database with real-time capabilities
- **JWT Authentication** for secure admin access
- **Twilio Integration** for SMS/WhatsApp notifications
- **OpenAI Integration** for AI-powered daily summaries
- **Automated Scheduling** with node-cron
- **Comprehensive Security** with rate limiting and validation

## ğŸ“ Project Structure

```
kili-clean-report/
â”œâ”€â”€ frontend/                    # React frontend application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/         # React components
â”‚   â”‚   â”œâ”€â”€ pages/             # Page components
â”‚   â”‚   â”œâ”€â”€ hooks/             # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ services/          # API services
â”‚   â”‚   â”œâ”€â”€ contexts/          # React contexts
â”‚   â”‚   â””â”€â”€ types/             # TypeScript definitions
â”‚   â”œâ”€â”€ public/                # Static assets
â”‚   â””â”€â”€ package.json           # Frontend dependencies
â”œâ”€â”€ backend/                    # Express.js backend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/            # API endpoints
â”‚   â”‚   â”œâ”€â”€ services/          # Business logic services
â”‚   â”‚   â”œâ”€â”€ middleware/        # Express middleware
â”‚   â”‚   â”œâ”€â”€ config/            # Configuration files
â”‚   â”‚   â””â”€â”€ types/             # TypeScript definitions
â”‚   â”œâ”€â”€ database/              # Database schema and migrations
â”‚   â””â”€â”€ package.json           # Backend dependencies
â”œâ”€â”€ docs/                      # Project documentation
â””â”€â”€ README.md                  # This file
```

## ğŸš€ Quick Start

### Prerequisites
- Node.js 18+ and npm
- Supabase account
- Twilio account (for notifications)
- OpenAI API key (optional, for AI summaries)

### 1. Frontend Setup

```bash
cd frontend
npm install
npm run dev
```

The frontend will be available at `http://localhost:3000`

### 2. Backend Setup

```bash
cd backend
npm install
cp .env.example .env
# Edit .env with your actual credentials
npm run dev
```

The backend will be available at `http://localhost:5000`

### 3. Database Setup

1. Create a Supabase project at https://supabase.com
2. Copy your project URL and API keys to `.env`
3. In Supabase SQL Editor, run:
   - `backend/database/schema.sql`
   - `backend/database/sample_data.sql` (optional)

### 4. External Services

**Twilio (for notifications):**
- Create account at https://twilio.com
- Get Account SID, Auth Token, and Phone Number
- For WhatsApp: Enable Twilio Sandbox

**OpenAI (for AI summaries):**
- Get API key from https://platform.openai.com
- Add to `.env` file

## ğŸ§ª Testing

### Default Admin Account
After running sample data:
- **Email**: `admin@cleankili.org`
- **Password**: `SuperAdmin123!`

### API Health Check
```bash
curl http://localhost:5000/api/health
```

### Submit Test Report
```bash
curl -X POST http://localhost:5000/api/reports \
  -H "Content-Type: application/json" \
  -d '{
    "description": "Test environmental issue needing attention",
    "lat": -1.2921,
    "lng": 36.8219,
    "category": "Waste Management"
  }'
## ğŸ“± Real-time Notifications

The system sends instant notifications via SMS and WhatsApp when:

### New Report Alerts
```
ğŸš¨ NEW ENVIRONMENTAL REPORT

ID: abc-123-def
Description: Large garbage dump affecting local community...
Location: Nairobi CBD, Kenya

Please review via CleanKili Admin Dashboard.
Time: 2024-01-15 14:30:00
```

### Daily AI Summaries (11:59 PM daily)
```
ğŸ“Š CleanKili Daily Report - 2024-01-15

ğŸ“ˆ OVERVIEW:
8 total reports, 4 pending review
2 critical alerts requiring immediate attention
Top location: Nairobi CBD (3 reports)
Completion rate: 75%

âš ï¸ Action Required: 4 reports pending review
```

## ğŸš€ Deployment

### Frontend Deployment
- **Vercel** (recommended for React apps)
- **Netlify**
- **GitHub Pages**

### Backend Deployment
- **Railway** (recommended for Node.js)
- **Heroku**
- **DigitalOcean App Platform**
- **AWS/GCP/Azure**

### Production Environment Variables
```env
NODE_ENV=production
CORS_ORIGIN=https://yourdomain.com
JWT_SECRET=your_super_secret_production_key
# ... other production configs
```

## ğŸ“š Documentation

- **Frontend README**: `frontend/README.md`
- **Backend README**: `backend/README.md`
- **Implementation Summary**: `backend/IMPLEMENTATION_SUMMARY.md`
- **API Documentation**: Available via backend health check endpoint
- **Database Schema**: `backend/database/schema.sql`

## ğŸ› ï¸ Development Scripts

### Root Project
```bash
npm run dev                    # Start both frontend and backend
npm run build                  # Build both frontend and backend
npm run install:all           # Install all dependencies
```

### Frontend
```bash
npm run dev                    # Development server
npm run build                  # Production build
npm run preview                # Preview production build
```

### Backend
```bash
npm run dev                    # Development server with auto-reload
npm run build                  # Compile TypeScript
npm start                      # Start production server
```

## ğŸŒŸ Key Features in Detail

### ğŸ¢ Admin System
- **Three-tier roles**: Super Admin, Admin, Moderator
- **Secure invitations**: SMS verification workflow
- **JWT authentication**: Secure session management
- **Role-based permissions**: Granular access control

### ğŸ“Š Analytics Dashboard
- **Real-time statistics**: Live report counts and status
- **Geographic insights**: Report hotspots and trends
- **Category breakdown**: Issue type analysis
- **Performance metrics**: Resolution rates and response times

### ğŸ¤– AI Integration
- **OpenAI GPT-4**: Intelligent daily summaries
- **Pattern recognition**: Identify trends and hotspots
- **Actionable insights**: Prioritized recommendations
- **Fallback templates**: Ensure summaries always generate

### ğŸ” Security
- **Rate limiting**: Prevent API abuse
- **Input validation**: Comprehensive request checking
- **SQL injection protection**: Parameterized queries
- **CORS configuration**: Secure cross-origin requests
- **Password hashing**: bcrypt with salt rounds

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## ğŸ“„ License

MIT License - see LICENSE file for details.

## ğŸ“ Support

For support and questions:
- **Email**: support@cleankili.org
- **Documentation**: Available in `/docs` folder
- **Issues**: Create GitHub issues for bugs and feature requests

---

**Built with â¤ï¸ for environmental sustainability and community empowerment** ğŸŒ±
```

## Development Workflow

Follow these steps:

```sh
# Step 1: Clone the repository using the project's Git URL.
git clone <YOUR_GIT_URL>

# Step 2: Navigate to the project directory.
cd <YOUR_PROJECT_NAME>

# Step 3: Install the necessary dependencies.
npm i

# Step 4: Start the development server with auto-reloading and an instant preview.
npm run dev
```

**Edit a file directly in GitHub**

- Navigate to the desired file(s).
- Click the "Edit" button (pencil icon) at the top right of the file view.
- Make your changes and commit the changes.

**Use GitHub Codespaces**

- Navigate to the main page of your repository.
- Click on the "Code" button (green button) near the top right.
- Select the "Codespaces" tab.
- Click on "New codespace" to launch a new Codespace environment.
- Edit files directly within the Codespace and commit and push your changes once you're done.

## What technologies are used for this project?

This project is built with:

- Vite
- TypeScript
- React
- shadcn-ui
- Tailwind CSS

## How can I deploy this project?

Simply open [Lovable](https://lovable.dev/projects/2b924a7a-e64b-43a8-8708-a8cc832bf691) and click on Share -> Publish.

## Can I connect a custom domain to my Lovable project?

Yes, you can!

To connect a domain, navigate to Project > Settings > Domains and click Connect Domain.

Read more here: [Setting up a custom domain](https://docs.lovable.dev/tips-tricks/custom-domain#step-by-step-guide)
